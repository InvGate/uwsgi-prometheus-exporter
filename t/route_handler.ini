[uwsgi]
# Test configuration for route handler mode

# Load plugin (assuming we're running from uwsgi root directory)
plugin = ./metrics_prometheus_plugin.so

# Enable metrics
enable-metrics = true

# Application
http-socket = 127.0.0.1:8080
wsgi-file = plugins/metrics_prometheus/t/test_app.py
processes = 2

# Route handler - serve metrics at /metrics
route = ^/metrics$ prometheus-metrics:

# Logging
log-format = [route-test] %(method) %(uri) - %(status)
